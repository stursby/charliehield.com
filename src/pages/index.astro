---
import { getCollection } from 'astro:content'
import Layout from '../layouts/Layout.astro'
import MeshGradient from '../components/MeshGradient.astro'
import Marquee from '../components/Marquee.astro'

const projects = (await getCollection('projects')).sort((a, b) => a.data.order - b.data.order)

const skills = ['Vue / Nuxt', 'Laravel', 'JavaScript', 'Livewire', 'Figma', 'HTML / CSS', 'Filament', 'Photoshop']

const hobbies = ['Mountain Biking', 'Snowboarding', 'Frisbee Golf', 'Hockey']
---

<Layout>
  <link
    href="https://fonts.bunny.net/css?family=gabarito:400,500,600,700,800,900|instrument-serif:400,400i&display=swap"
    rel="stylesheet"
  />

  <style>
    /*
     * DESIGN SYSTEM STANDARDS
     * -----------------------
     * All interactive elements follow these consistent patterns:
     *
     * TIMING: cubic-bezier(0.16, 1, 0.3, 1) at 300ms
     * BORDERS: 2px solid (standardized across all elements)
     * HOVER TRANSFORMS: -translate-y-0.5 for buttons, scale-105 for submit
     * FOCUS STATES: All interactive elements have focus-visible styles
     * OPACITY: Links use 0.7 â†’ 1.0 transition on hover/focus
     *
     * BUTTON STYLES:
     * - Primary: bg-dark â†’ bg-orange with border transition
     * - Secondary: bg-transparent â†’ bg-dark with text color swap
     * - Submit: bg-orange â†’ bg-yellow with lift effect
     * - All use rounded-full with consistent padding
     *
     * LINK STYLES:
     * - Nav links: Color transition to orange
     * - Project links: Border-bottom with arrow slide
     * - Footer links: Gap expansion with arrow fade-in
     *
     * FORM INPUTS:
     * - bg-white/5 with border-2 border-white/20
     * - Rounded corners (rounded-lg)
     * - Hover: Increased border opacity + background intensity
     * - Focus: Orange border + enhanced background
     * - Label color transition on focus-within
     */

    @keyframes hero-slide-up-1 {
      from {
        opacity: 0;
        transform: translateY(80px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes hero-slide-up-2 {
      from {
        opacity: 0;
        transform: translateY(80px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes hero-slide-up-3 {
      from {
        opacity: 0;
        transform: translateY(80px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes hero-slide-up-4 {
      from {
        opacity: 0;
        transform: translateY(80px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes mobileFadeUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .hero-overline {
      animation: hero-slide-up-1 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.1s both;
    }
    .hero-title {
      animation: hero-slide-up-2 1s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
    }
    .hero-subtitle {
      animation: hero-slide-up-3 1s cubic-bezier(0.16, 1, 0.3, 1) 0.4s both;
    }
    .hero-ctas {
      animation: hero-slide-up-4 1s cubic-bezier(0.16, 1, 0.3, 1) 0.6s both;
    }
    .mobile-menu.open a:nth-child(1) {
      transition:
        opacity 0.4s 0.1s,
        transform 0.4s 0.1s,
        color 0.3s,
        padding-left 0.3s;
    }
    .mobile-menu.open a:nth-child(2) {
      transition:
        opacity 0.4s 0.18s,
        transform 0.4s 0.18s,
        color 0.3s,
        padding-left 0.3s;
    }
    .mobile-menu.open a:nth-child(3) {
      transition:
        opacity 0.4s 0.26s,
        transform 0.4s 0.26s,
        color 0.3s,
        padding-left 0.3s;
    }
    .mobile-menu.open a:nth-child(4) {
      transition:
        opacity 0.4s 0.34s,
        transform 0.4s 0.34s,
        color 0.3s,
        padding-left 0.3s;
    }

    /* Project Timeline Styles */
    .timeline-container {
      padding: 0;
      max-width: 1800px;
      margin: 0 auto;
      position: relative;
    }

    @media (max-width: 768px) {
      .timeline-container {
        padding: 0;
      }
    }

    .project-section {
      margin-bottom: 0;
      padding: clamp(4rem, 8vw, 8rem) clamp(1.5rem, 5vw, 4rem);
      position: relative;
      transition: background 0.5s;
    }

    /* Alternating sides layout */
    .timeline-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      align-items: start;
      max-width: 1600px;
      margin: 0 auto;
    }

    @media (max-width: 768px) {
      .timeline-content {
        grid-template-columns: 1fr;
        padding-left: 0;
        gap: 0;
        display: flex;
        flex-direction: column;
      }
    }

    .content-left,
    .content-right {
      opacity: 0;
      animation: slideIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    .content-left {
      padding-right: 3rem;
      text-align: right;
      animation-delay: 0.2s;
      position: relative;
      z-index: 1;
    }

    /* Sticky positioning for project info on desktop */
    @media (min-width: 769px) {
      .content-left {
        position: -webkit-sticky;
        position: sticky;
        top: 12rem;
        align-self: start;
      }
    }

    .content-right {
      padding-left: 3rem;
      animation-delay: 0.3s;
      position: relative;
      z-index: 1;
    }

    @media (max-width: 768px) {
      .content-left,
      .project-section:nth-child(even) .content-left,
      .project-section:nth-child(odd) .content-left {
        text-align: left;
        padding: 0 !important;
        padding-bottom: clamp(2rem, 5vw, 3rem) !important;
      }

      .content-right {
        padding: 0;
      }

      /* Mobile: Simple linear layout - content first, images below */
      .project-section {
        padding: clamp(3rem, 6vw, 4rem) 1.5rem;
      }

      .project-client {
        font-size: 0.75rem;
        padding: 0.4rem 1rem;
        margin-bottom: 1rem;
      }

      .project-title {
        font-size: clamp(2.5rem, 10vw, 3.5rem);
        line-height: 0.92;
        margin-bottom: 1rem;
      }

      .project-description {
        font-size: 0.95rem;
        line-height: 1.6;
        margin-bottom: 1.25rem;
        max-width: 100%;
      }

      .project-link {
        margin-top: 1.25rem;
      }

      /* Images grid - cleaner spacing */
      .content-right .images-grid {
        gap: 2rem;
        margin-top: clamp(2rem, 5vw, 3rem);
      }
    }

    /* Alternate projects between left and right */
    .project-section:nth-child(odd) .content-left {
      grid-column: 1;
    }

    .project-section:nth-child(odd) .content-right {
      grid-column: 2;
    }

    .project-section:nth-child(even) .content-left {
      grid-column: 2;
      text-align: left;
      padding-left: 3rem;
      padding-right: 0;
    }

    /* Also make the even-numbered project info sticky */
    @media (min-width: 769px) {
      .project-section:nth-child(even) .content-left {
        position: -webkit-sticky;
        position: sticky;
        top: 12rem;
        align-self: start;
      }
    }

    .project-section:nth-child(even) .content-right {
      grid-column: 1;
      grid-row: 1;
    }

    /* Reset grid positioning on mobile for consistent single-column layout */
    @media (max-width: 768px) {
      .project-section:nth-child(odd) .content-left,
      .project-section:nth-child(even) .content-left,
      .project-section:nth-child(odd) .content-right,
      .project-section:nth-child(even) .content-right {
        grid-column: auto;
        grid-row: auto;
      }
    }

    .project-number {
      position: absolute;
      font-family: 'Instrument Serif', serif;
      font-style: italic;
      font-weight: 400;
      font-size: clamp(12rem, 30vw, 28rem);
      line-height: 1;
      opacity: 0.035;
      pointer-events: none;
      user-select: none;
      z-index: 0;
    }

    /* Position number in top corners for odd/even sections */
    .project-section:nth-child(odd) .project-number {
      top: -0.1em;
      right: -0.05em;
    }

    .project-section:nth-child(even) .project-number {
      top: -0.1em;
      left: -0.05em;
    }

    @media (max-width: 768px) {
      .project-number {
        font-size: clamp(8rem, 22vw, 12rem);
        top: 0.2em;
        bottom: auto;
        right: -0.05em;
        left: auto;
        opacity: 0.05;
      }

      .project-section:nth-child(even) .project-number,
      .project-section:nth-child(odd) .project-number {
        top: 0.2em;
        bottom: auto;
        right: -0.05em;
        left: auto;
      }
    }

    .project-client {
      font-family: 'Gabarito', sans-serif;
      font-weight: 700;
      font-size: 0.8rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      padding: 0.5rem 1.25rem;
      border: 2px solid currentColor;
      border-radius: 50px;
      opacity: 0.7;
      display: inline-block;
      margin-bottom: 2rem;
    }

    .project-title {
      font-family: 'Instrument Serif', serif;
      font-size: clamp(3rem, 8vw, 7rem);
      line-height: 0.92;
      letter-spacing: -0.02em;
      margin-bottom: 1.5rem;
    }

    .project-description {
      font-family: 'Gabarito', sans-serif;
      font-size: clamp(0.95rem, 1.5vw, 1.15rem);
      font-weight: 500;
      line-height: 1.6;
      max-width: 550px;
      opacity: 0.8;
      margin-bottom: 1.5rem;
    }

    .project-section:nth-child(even) .project-description {
      margin-left: 0;
      margin-right: auto;
    }

    .project-section:nth-child(odd) .project-description {
      margin-left: auto;
      margin-right: 0;
    }

    @media (max-width: 768px) {
      .project-description,
      .project-section:nth-child(even) .project-description,
      .project-section:nth-child(odd) .project-description {
        margin-left: 0;
        margin-right: 0;
      }
    }

    /* Image grid on the side */
    .images-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 3rem;
    }

    .timeline-image {
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
    }

    .timeline-image img,
    .timeline-image video {
      width: 100%;
      max-width: 100%;
      height: auto;
      display: block;
    }

    /* Portrait images: container fits image size, centered */
    .timeline-image.portrait {
      width: fit-content;
      max-width: 420px;
      margin: 0 auto;
    }

    .timeline-image.portrait img,
    .timeline-image.portrait video {
      width: 100%;
    }

    @media (max-width: 768px) {
      .timeline-image.portrait {
        max-width: 100%;
        width: fit-content;
        margin: 0 auto;
      }

      .timeline-image.portrait img,
      .timeline-image.portrait video {
        max-width: 360px;
        width: 100%;
      }
    }

    /* Tech tags */
    .tech-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .project-section:nth-child(odd) .tech-tags {
      justify-content: flex-end;
    }

    @media (max-width: 768px) {
      .tech-tags,
      .project-section:nth-child(odd) .tech-tags {
        justify-content: flex-start;
      }
    }

    .tech-tag {
      font-family: 'Gabarito', sans-serif;
      font-size: 0.875rem;
      font-weight: 600;
      padding: 0.5rem 1rem;
      border-radius: 50px;
    }

    .project-link {
      font-family: 'Gabarito', sans-serif;
      font-weight: 600;
      font-size: 0.875rem;
      letter-spacing: 0.05em;
      text-decoration: none;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 2rem;
      padding-bottom: 0.25rem;
      border-bottom: 2px solid currentColor;
      opacity: 0.7;
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      outline: none;
    }

    .project-link:hover {
      opacity: 1;
      gap: 0.75rem;
    }

    .project-link:focus-visible {
      opacity: 1;
      gap: 0.75rem;
      outline: 2px solid currentColor;
      outline-offset: 4px;
    }

    .project-link span {
      transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .project-link:hover span,
    .project-link:focus-visible span {
      transform: translateX(4px);
    }

    @media (max-width: 768px) {
      .project-section:nth-child(odd) .project-number,
      .project-section:nth-child(even) .project-number {
        text-align: left;
      }
    }
  </style>

  <div class="font-sans bg-cream text-dark overflow-x-clip antialiased">
    <!-- NAV -->
    <nav
      class="fixed top-0 left-0 right-0 z-[100] flex justify-between items-center px-[clamp(1.5rem,5vw,4rem)] py-5 bg-cream/50 backdrop-blur-[12px] border-b-[1.5px] border-dark/[0.06]"
    >
      <a href="/" class="flex items-center gap-3 no-underline">
        <span class="font-serif text-2xl italic text-dark no-underline">Charlie Hield</span>
      </a>
      <div class="hidden md:flex gap-8 items-center">
        <a
          href="#projects"
          class="font-sans text-base font-semibold text-dark no-underline tracking-[0.02em] transition-colors duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] hover:text-orange focus-visible:text-orange focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-4"
          >Projects</a
        >
        <a
          href="#about"
          class="font-sans text-base font-semibold text-dark no-underline tracking-[0.02em] transition-colors duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] hover:text-orange focus-visible:text-orange focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-4"
          >About</a
        >
        <a
          href="https://github.com/stursby"
          target="_blank"
          class="font-sans text-base font-semibold text-dark no-underline tracking-[0.02em] transition-colors duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] hover:text-orange focus-visible:text-orange focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-4 flex items-center gap-2"
        >
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
            ></path>
          </svg>
          GitHub
        </a>
        <a
          href="#contact"
          class="font-sans text-base font-semibold !bg-dark !text-white px-6 py-2.5 rounded-full border-2 border-dark transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] hover:!bg-orange hover:border-orange focus-visible:!bg-orange focus-visible:border-orange focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
          >Contact</a
        >
      </div>
      <button
        class="md:hidden bg-none border-none cursor-pointer w-9 h-9 relative z-[200] p-0 flex items-center justify-center focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
        id="nav-hamburger"
        aria-label="Toggle menu"
      >
        <div class="hamburger-lines">
          <span
            class="block w-6 h-0.5 bg-dark mx-auto rounded-sm mb-[7px] transition-all duration-[0.35s] [transition-timing-function:cubic-bezier(0.16,1,0.3,1)]"
          ></span>
          <span
            class="block w-6 h-0.5 bg-dark mx-auto rounded-sm transition-all duration-[0.35s] [transition-timing-function:cubic-bezier(0.16,1,0.3,1)]"
          ></span>
          <span
            class="block w-6 h-0.5 bg-dark mx-auto rounded-sm mt-[7px] transition-all duration-[0.35s] [transition-timing-function:cubic-bezier(0.16,1,0.3,1)]"
          ></span>
        </div>
        <svg
          class="close-icon absolute w-5 h-5 opacity-0 transition-all duration-[0.35s] [transition-timing-function:cubic-bezier(0.16,1,0.3,1)]"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </nav>

    <!-- Mobile menu -->
    <div
      class="fixed inset-0 bg-dark/30 z-[140] opacity-0 pointer-events-none transition-opacity duration-[0.4s] backdrop-blur-[4px]"
      id="mobile-overlay"
    >
    </div>
    <div
      class="mobile-menu fixed top-0 right-0 w-full max-w-[360px] h-screen bg-cream z-[150] pt-28 px-10 pb-12 flex flex-col gap-0 translate-x-full transition-transform duration-[0.45s] [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] shadow-[0_0_0_rgba(0,0,0,0)]"
      id="mobile-menu"
    >
      <a
        href="#projects"
        class="mobile-link font-serif text-[2.5rem] italic text-dark no-underline py-2.5 border-b-2 border-dark/[0.06] transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] opacity-0 translate-x-5 hover:text-orange hover:pl-3 focus-visible:text-orange focus-visible:pl-3 focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
        >Projects</a
      >
      <a
        href="#about"
        class="mobile-link font-serif text-[2.5rem] italic text-dark no-underline py-2.5 border-b-2 border-dark/[0.06] transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] opacity-0 translate-x-5 hover:text-orange hover:pl-3 focus-visible:text-orange focus-visible:pl-3 focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
        >About</a
      >
      <a
        href="#contact"
        class="mobile-link font-serif text-[2.5rem] italic text-dark no-underline py-2.5 border-b-2 border-dark/[0.06] transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] opacity-0 translate-x-5 hover:text-orange hover:pl-3 focus-visible:text-orange focus-visible:pl-3 focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
        >Contact</a
      >
      <a
        href="https://github.com/stursby"
        target="_blank"
        class="mobile-link font-serif text-[2.5rem] italic text-dark no-underline py-2.5 border-b-2 border-dark/[0.06] transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] opacity-0 translate-x-5 hover:text-orange hover:pl-3 focus-visible:text-orange focus-visible:pl-3 focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
        >GitHub</a
      >
    </div>

    <!-- HERO -->
    <section
      class="min-h-screen flex flex-col justify-center items-center px-[clamp(1.5rem,5vw,4rem)] pt-32 pb-16 text-center relative bg-cream overflow-hidden"
    >
      <MeshGradient />
      <h1
        class="hero-title relative z-10 font-serif text-[clamp(4rem,11vw,9.5rem)] leading-[0.9] tracking-[-0.03em] text-dark"
      >
        Building<br /><em
          class="italic text-orange relative inline-block after:content-[''] after:absolute after:bottom-[0.04em] after:left-[-0.1em] after:right-[-0.03em] after:h-[0.15em] after:bg-orange/20 after:rounded-full after:z-[-1]"
          >Digital</em
        ><br />Experiences
      </h1>
      <p
        class="hero-subtitle relative z-10 font-sans text-[clamp(0.9rem,1.5vw,1.1rem)] font-medium text-[#666] max-w-[520px] leading-[1.4] mt-8"
      >
        Full-stack developer and creative technologist with 15+ years of experience delivering high-performance
        websites, interactive platforms, and innovative digital experiences for leading brands.
      </p>
      <div class="hero-ctas relative z-10 flex gap-4 mt-10">
        <a
          href="#projects"
          class="font-sans font-bold text-[0.9rem] px-8 py-3.5 bg-dark text-white border-2 border-dark rounded-full cursor-pointer no-underline transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] hover:bg-orange hover:border-orange hover:shadow-[0_8px_25px_rgba(232,88,12,0.3)] focus-visible:bg-orange focus-visible:border-orange focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
          >View Projects</a
        >
        <a
          href="https://github.com/stursby"
          target="_blank"
          class="font-sans font-bold text-[0.9rem] px-8 py-3.5 bg-transparent text-dark border-2 border-dark rounded-full cursor-pointer no-underline transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] hover:bg-dark hover:text-white focus-visible:bg-dark focus-visible:text-white focus-visible:outline-2 focus-visible:outline-dark focus-visible:outline-offset-2"
          >GitHub</a
        >
      </div>
    </section>

    <!-- MARQUEE STRIP -->
    <Marquee items={skills} backgroundColor="bg-dark" textColor="text-white" separator="dot" speed="normal" />

    <!-- PROJECTS -->
    <div id="projects" class="timeline-container">
      {
        projects.map((project, index) => {
          const {
            title,
            subtitle,
            description,
            url,
            client,
            order,
            backgroundColor,
            textColor,
            tagBackgroundColor,
            tagTextColor,
            technologies,
            content
          } = project.data
          const orderFormatted = String(order).padStart(2, '0')
          const displayTitle = subtitle ? (
            <>
              {title}
              <br />
              <em class="italic">{subtitle}</em>
            </>
          ) : (
            <em class="italic">{title}</em>
          )

          return (
            <section class="project-section" style={`background-color: ${backgroundColor}; color: ${textColor};`}>
              <div class="timeline-content">
                <div class="content-left">
                  <div class="project-number">{orderFormatted}</div>

                  {client && <span class="project-client">{client}</span>}

                  <h2 class="project-title">{displayTitle}</h2>
                  <p class="project-description">{description}</p>

                  {technologies && technologies.length > 0 && (
                    <div class="tech-tags">
                      {technologies.map(tech => (
                        <span
                          class="tech-tag"
                          style={`background-color: ${tagBackgroundColor}; color: ${tagTextColor};`}
                        >
                          {tech}
                        </span>
                      ))}
                    </div>
                  )}

                  <a href={url} target="_blank" class="project-link" style={`color: ${textColor};`}>
                    View Project <span>&rarr;</span>
                  </a>
                </div>

                <div class="content-right">
                  <div class="images-grid">
                    {content.map(item => {
                      // Detect portrait/tall images from aspectRatio
                      const isPortrait =
                        item.aspectRatio &&
                        (item.aspectRatio.includes('9/16') ||
                          item.aspectRatio.includes('[9/16]') ||
                          item.aspectRatio.includes('3/4') ||
                          item.aspectRatio.includes('[3/4]'))
                      const imageClass = isPortrait ? 'timeline-image portrait' : 'timeline-image'

                      return (
                        <div class={imageClass}>
                          {item.type === 'image' ? (
                            <img src={item.url} alt={item.alt} loading="lazy" />
                          ) : (
                            <video src={item.url} autoplay muted playsinline loop>
                              <track kind="captions" />
                            </video>
                          )}
                        </div>
                      )
                    })}
                  </div>
                </div>
              </div>
            </section>
          )
        })
      }
    </div>

    <!-- HOBBIES MARQUEE -->
    <Marquee items={hobbies} backgroundColor="bg-yellow" textColor="text-dark" separator="dot" speed="slow" />

    <!-- ABOUT & SKILLS -->
    <section class="bg-cream py-[clamp(4rem,8vw,8rem)] px-[clamp(1.5rem,5vw,4rem)]" id="about">
      <div class="max-w-[1400px] mx-auto grid grid-cols-1 md:grid-cols-2 gap-[clamp(3rem,6vw,8rem)]">
        <div>
          <div class="font-sans font-bold text-xs tracking-[0.2em] uppercase text-orange mb-6">About Me</div>
          <h2 class="font-serif text-[clamp(2.5rem,5vw,4.5rem)] leading-none tracking-[-0.02em] mb-8">
            Code meets<br /><em class="italic text-orange">Craft</em>
          </h2>
          <p class="font-sans text-[1.05rem] font-medium leading-[1.7] text-[#555] max-w-[480px] mb-8 text-balance">
            Iâ€™m a Minneapolis, MN based full-stack developer and creative technologist with 15+ years of experience
            turning complex ideas into elegant, high-performance digital products. I thrive in collaborative agency
            environments where creative thinking and technical precision come together to produce meaningful digital
            experiences.
          </p>
          <div class="inline-block">
            <img
              src="/lego.png"
              alt="Lego minifigure"
              class="w-32 h-auto rounded-2xl shadow-[0_8px_24px_rgba(0,0,0,0.15)] rotate-[-2deg]"
            />
          </div>
        </div>
        <div>
          <div class="font-sans font-bold text-xs tracking-[0.2em] uppercase text-orange mb-6">Technical Skills</div>
          <div class="flex flex-col gap-0">
            <div
              class="font-sans font-bold text-[clamp(1.1rem,2vw,1.5rem)] py-5 border-b-2 border-t-2 border-dark/[0.08] flex justify-between items-center transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] cursor-default hover:pl-6 hover:text-orange focus-within:pl-6 focus-within:text-orange group"
            >
              HTML / CSS / JavaScript
              <span
                class="text-[0.7rem] font-semibold tracking-[0.1em] uppercase opacity-0 -translate-x-2.5 transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] text-[#999] group-hover:opacity-100 group-hover:translate-x-0 group-focus-within:opacity-100 group-focus-within:translate-x-0"
                >Frontend</span
              >
            </div>
            <div
              class="font-sans font-bold text-[clamp(1.1rem,2vw,1.5rem)] py-5 border-b-2 border-dark/[0.08] flex justify-between items-center transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] cursor-default hover:pl-6 hover:text-orange focus-within:pl-6 focus-within:text-orange group"
            >
              Vue / Nuxt
              <span
                class="text-[0.7rem] font-semibold tracking-[0.1em] uppercase opacity-0 -translate-x-2.5 transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] text-[#999] group-hover:opacity-100 group-hover:translate-x-0 group-focus-within:opacity-100 group-focus-within:translate-x-0"
                >Framework</span
              >
            </div>
            <div
              class="font-sans font-bold text-[clamp(1.1rem,2vw,1.5rem)] py-5 border-b-2 border-dark/[0.08] flex justify-between items-center transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] cursor-default hover:pl-6 hover:text-orange focus-within:pl-6 focus-within:text-orange group"
            >
              Laravel / Livewire / Filament
              <span
                class="text-[0.7rem] font-semibold tracking-[0.1em] uppercase opacity-0 -translate-x-2.5 transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] text-[#999] group-hover:opacity-100 group-hover:translate-x-0 group-focus-within:opacity-100 group-focus-within:translate-x-0"
                >Backend</span
              >
            </div>
            <div
              class="font-sans font-bold text-[clamp(1.1rem,2vw,1.5rem)] py-5 border-b-2 border-dark/[0.08] flex justify-between items-center transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] cursor-default hover:pl-6 hover:text-orange focus-within:pl-6 focus-within:text-orange group"
            >
              Figma / Photoshop / Illustrator / XD
              <span
                class="text-[0.7rem] font-semibold tracking-[0.1em] uppercase opacity-0 -translate-x-2.5 transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] text-[#999] group-hover:opacity-100 group-hover:translate-x-0 group-focus-within:opacity-100 group-focus-within:translate-x-0"
                >Design</span
              >
            </div>
            <div
              class="font-sans font-bold text-[clamp(1.1rem,2vw,1.5rem)] py-5 border-b-2 border-dark/[0.08] flex justify-between items-center transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] cursor-default hover:pl-6 hover:text-orange focus-within:pl-6 focus-within:text-orange group"
            >
              Anthropic / OpenAI
              <span
                class="text-[0.7rem] font-semibold tracking-[0.1em] uppercase opacity-0 -translate-x-2.5 transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] text-[#999] group-hover:opacity-100 group-hover:translate-x-0 group-focus-within:opacity-100 group-focus-within:translate-x-0"
                >AI</span
              >
            </div>
            <div
              class="font-sans font-bold text-[clamp(1.1rem,2vw,1.5rem)] py-5 border-b-2 border-dark/[0.08] flex justify-between items-center transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] cursor-default hover:pl-6 hover:text-orange focus-within:pl-6 focus-within:text-orange group"
            >
              Raspberry Pi / Arduino
              <span
                class="text-[0.7rem] font-semibold tracking-[0.1em] uppercase opacity-0 -translate-x-2.5 transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] text-[#999] group-hover:opacity-100 group-hover:translate-x-0 group-focus-within:opacity-100 group-focus-within:translate-x-0"
                >IoT</span
              >
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer
      class="text-white pt-[clamp(4rem,8vw,8rem)] pb-8 px-[clamp(1.5rem,5vw,4rem)] relative overflow-hidden"
      id="contact"
    >
      <!-- DARKER MESH GRADIENT -->
      <MeshGradient
        colors={[
          '#0f0f0f', // deep black
          '#1a1a1a', // very dark gray
          '#242424', // dark gray
          '#2d2d2d', // charcoal
          '#1a1a1a', // very dark gray
          '#7a7a7a', // ONE lighter steel accent
          '#0f0f0f', // deep black
          '#242424', // dark gray
          '#1a1a1a', // very dark gray
          '#2d2d2d', // charcoal
          '#0f0f0f' // deep black
        ]}
      />

      <div class="relative z-[2] max-w-[1400px] mx-auto">
        <!-- HEADER -->
        <div class="text-center mb-[clamp(3rem,6vw,5rem)]">
          <h2 class="font-serif text-[clamp(4rem,11vw,9.5rem)] leading-[0.9] tracking-[-0.03em] mb-6">
            <span class="text-white/40">Letâ€™s Build</span><br />
            <em class="italic text-white"
              >Something <span
                class="relative inline-block after:content-[''] after:absolute after:bottom-[0.04em] after:left-[-0.05em] after:right-[-0.1em] after:h-[0.15em] after:bg-white/10 after:rounded-full after:z-[-1]"
                >Great</span
              ></em
            >
          </h2>
        </div>

        <!-- CONTACT FORM -->
        <div class="max-w-[700px] mx-auto mb-[clamp(4rem,8vw,6rem)]">
          <div class="bg-black/40 backdrop-blur-sm rounded-2xl p-8 md:p-12 border border-white/10">
            <form
              name="contact"
              method="POST"
              data-netlify="true"
              class="flex flex-col gap-6"
              aria-label="Contact form"
            >
              <input type="hidden" name="form-name" value="contact" />

              <!-- NAME + EMAIL ROW -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- NAME -->
                <div class="group">
                  <label
                    for="name"
                    class="font-sans font-bold text-xs tracking-[0.15em] uppercase text-white/60 mb-3 block transition-colors duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] group-focus-within:text-orange"
                  >
                    Name <span class="text-orange">*</span>
                  </label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    placeholder="Jane Smith"
                    required
                    aria-required="true"
                    class="w-full font-sans text-lg font-semibold py-3 px-4 bg-white/5 border-2 border-white/20 rounded-lg text-white outline-none transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] placeholder:text-white/30 hover:border-white/40 hover:bg-white/8 focus:border-orange focus:bg-white/10"
                  />
                </div>

                <!-- EMAIL -->
                <div class="group">
                  <label
                    for="email"
                    class="font-sans font-bold text-xs tracking-[0.15em] uppercase text-white/60 mb-3 block transition-colors duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] group-focus-within:text-orange"
                  >
                    Email <span class="text-orange">*</span>
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder="jane@company.com"
                    required
                    aria-required="true"
                    class="w-full font-sans text-lg font-semibold py-3 px-4 bg-white/5 border-2 border-white/20 rounded-lg text-white outline-none transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] placeholder:text-white/30 hover:border-white/40 hover:bg-white/8 focus:border-orange focus:bg-white/10"
                  />
                </div>
              </div>

              <!-- MESSAGE -->
              <div class="group">
                <label
                  for="message"
                  class="font-sans font-bold text-xs tracking-[0.15em] uppercase text-white/60 mb-3 block transition-colors duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] group-focus-within:text-orange"
                >
                  Message <span class="text-orange">*</span>
                </label>
                <textarea
                  id="message"
                  name="message"
                  rows="4"
                  placeholder="Tell me about your project..."
                  required
                  aria-required="true"
                  class="w-full font-sans text-lg font-medium leading-[1.5] py-3 px-4 bg-white/5 border-2 border-white/20 rounded-lg text-white outline-none transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] resize-y placeholder:text-white/30 hover:border-white/40 hover:bg-white/8 focus:border-orange focus:bg-white/10 min-h-[120px]"
                ></textarea>
              </div>

              <!-- SUBMIT BUTTON -->
              <div class="flex justify-center mt-6">
                <button
                  type="submit"
                  class="font-sans font-bold text-base tracking-[0.05em] uppercase bg-orange text-white py-4 px-10 border-2 border-orange rounded-full cursor-pointer transition-all duration-300 [transition-timing-function:cubic-bezier(0.16,1,0.3,1)] hover:bg-yellow hover:border-yellow hover:text-dark focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2"
                  aria-label="Submit contact form"
                >
                  Send Message
                </button>
              </div>

              <p class="sr-only">All fields are required.</p>
            </form>
          </div>
        </div>

        <!-- FOOTER -->
        <div class="mt-16 pt-12 pb-6 border-t border-white/10">
          <div class="grid grid-cols-1 md:grid-cols-3 items-center gap-4 text-center md:text-left">
            <div class="font-sans text-base text-white/50 md:text-left flex gap-1 justify-center md:justify-start">
              <span class="text-xl">Â©</span> 2026 Charlie Hield
            </div>
            <div class="font-serif italic text-xl text-white/50 text-center">Made with ðŸ’› &nbsp;in MPLS</div>
            <div class="md:text-right flex justify-center md:justify-end">
              <a
                href="https://github.com/stursby"
                target="_blank"
                class="font-sans text-base text-white/50 no-underline inline-flex items-center gap-1.5 transition-colors duration-300 hover:text-orange focus-visible:text-orange focus-visible:outline-2 focus-visible:outline-orange focus-visible:outline-offset-2 focus-visible:rounded-sm"
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="opacity-70">
                  <path
                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                  ></path>
                </svg>
                GitHub
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Mobile menu
    const hamburger = document.getElementById('nav-hamburger')
    const mobileMenu = document.getElementById('mobile-menu')
    const overlay = document.getElementById('mobile-overlay')

    function toggleMenu() {
      hamburger?.classList.toggle('active')
      mobileMenu?.classList.toggle('open')
      overlay?.classList.toggle('open')
      document.body.style.overflow = mobileMenu?.classList.contains('open') ? 'hidden' : ''
    }

    function closeMenu() {
      hamburger?.classList.remove('active')
      mobileMenu?.classList.remove('open')
      overlay?.classList.remove('open')
      document.body.style.overflow = ''
    }

    hamburger?.addEventListener('click', toggleMenu)
    overlay?.addEventListener('click', closeMenu)
    document.querySelectorAll('.mobile-link').forEach(link => {
      link.addEventListener('click', closeMenu)
    })

    // Update hamburger animation when open
    const style = document.createElement('style')
    style.textContent = `
      .active .hamburger-lines {
        opacity: 0;
        transform: scale(0.8);
      }
      .active .close-icon {
        opacity: 1;
        transform: rotate(90deg);
      }
      .mobile-menu.open a {
        opacity: 1;
        transform: translateX(0);
      }
      .mobile-menu.open {
        transform: translateX(0);
        box-shadow: -10px 0 40px rgba(0, 0, 0, 0.1);
      }
      .mobile-overlay.open {
        opacity: 1;
        pointer-events: auto;
      }
    `
    document.head.appendChild(style)

    // Mobile scroll animations for projects
    if (window.innerWidth <= 768) {
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -80px 0px'
      }

      const projectObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('mobile-visible')
          }
        })
      }, observerOptions)

      // Observe all project sections
      document.querySelectorAll('.project-section').forEach(section => {
        section.classList.add('mobile-animated')
        projectObserver.observe(section)
      })

      // Add mobile animation styles
      const mobileStyle = document.createElement('style')
      mobileStyle.textContent = `
        @media (max-width: 768px) {
          .mobile-animated .content-left,
          .mobile-animated .content-right .timeline-image {
            opacity: 0;
          }

          .mobile-animated.mobile-visible .content-left {
            animation: mobileFadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.1s forwards;
          }

          .mobile-animated.mobile-visible .content-right .timeline-image {
            animation: mobileFadeUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
          }

          .mobile-animated.mobile-visible .content-right .timeline-image:nth-child(1) {
            animation-delay: 0.2s;
          }

          .mobile-animated.mobile-visible .content-right .timeline-image:nth-child(2) {
            animation-delay: 0.3s;
          }

          .mobile-animated.mobile-visible .content-right .timeline-image:nth-child(3) {
            animation-delay: 0.4s;
          }

          .mobile-animated.mobile-visible .content-right .timeline-image:nth-child(4) {
            animation-delay: 0.5s;
          }

          .mobile-animated.mobile-visible .content-right .timeline-image:nth-child(5) {
            animation-delay: 0.6s;
          }
        }
      `
      document.head.appendChild(mobileStyle)
    }
  </script>
</Layout>
